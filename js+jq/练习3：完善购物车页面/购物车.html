<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>12包佑泉</title>
    <link type="text/css" rel="stylesheet" href="css/cartStyle.css" />
    <script type="text/javascript" src="js/cartJS.js"></script>
</head>
<body>
<div class="content">
    <div class="logo">
        <img src="images/logo.jpg"><span onclick="close_plan();">关闭</span>
    </div>
    <div class="cartList">
        <ul>
            <li><p onclick="collection(0);">移入收藏</p><p onclick="del(0);">删除</p></li>
            <li id="price0">¥159.00</li> 
            <li>
                <input type="button" name="minus" value="-" onclick="minus(0);">
                <input type="text" name="amount" value="1">
                <input type="button" name="plus" value="+" onclick="plus(0);">
            </li>
            <li>¥<input type="text" name="price" value="159.00"></li>
        </ul>
        <ul>
            <li><p onclick="collection(1);">移入收藏</p><p onclick="del(1);">删除</p></li>
            <li id="price1">¥159.00</li>
            <li>
                <input type="button" name="minus" value="-" onclick="minus(1);">
                <input type="text" name="amount" value="1">
                <input type="button" name="plus" value="+" onclick="plus(1);">
            </li>
            <li>¥<input type="text" name="price" value="159.00"></li>
        </ul>
        <ol>
            <li id="totalPrice">&nbsp;</li>
            <li><span onclick="accounts();">结 算</span></li>
        </ol>
    </div>
</div>
<script>
function plus(num) {
    var amounts = document.getElementsByName("amount");
    amounts[num].value = parseInt(amounts[num].value) + 1;
    updatePrice(num);
    total();
}
function minus(num) {
    var prices = document.getElementsByName("price")[num].value;
    var counts = document.getElementsByName("amount")[num].value-1;
    if (counts< 1) {
        alert("不能再减了，再减就没有了！");
        return;
    }
    else
      document.getElementsByName("amount")[num].value = count;
    var totals = parseFloat(prices*count);
    document.getElementById("price"+num).innerHTML = "¥"+totals;
    updatePrice(num);
    total();
}
function updatePrice(num) {
    var prices = document.getElementsByName("price");
    var amounts = document.getElementsByName("amount");
    var total = (parseFloat(prices[num].value) * parseInt(amounts[num].value)).toFixed(2);
    document.getElementById("price" + num).innerHTML = "¥" + total;
}
function total() {
    var prices = document.getElementsByName("price");
    var amounts = document.getElementsByName("amount");
    var sum = 0;
    for (var i = 0; i < prices.length; i++) {
        sum += parseFloat(prices[i].value) * parseInt(amounts[i].value);
    }
    document.getElementById("totalPrice").innerHTML = "¥" + sum;
}
function collection(num) {
    alert("商品 " + (num + 1) + " 已移入收藏！");
}
function del(num) {
    var ulList = document.querySelectorAll('.cartList ul');
    ulList[num].style.display = "none";
    total();
}
function accounts() {
    alert("点击确认购买");
}
function close_plan() {
    document.querySelector('.content').style.display = 'none';
}
window.onload = function() {
    total();
    updatePrice(0);
    updatePrice(1);
};
</script>
</body>
</html>